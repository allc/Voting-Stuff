{% extends "base.html" %}

{% block content %}

{% for message in get_flashed_messages() %}
<div class="notification {{ message.type }}">
    <button class="delete" onclick="closeNotification(this)"></button>
    {{ message.text|safe }}
</div>
{% endfor %}

<div class="container">
    <div class="box">
        <h1 class="is-size-3">Request Voter ID</h1>
        <form method="post" action="{{ url_for('api.request_voter_id') }}">
            <div class="field">
                <label class="label">Voter Email</label>
                <div class="control">
                    <input class="input" type="email" name="voter_email" required>
                </div>
            </div>
            <div class="control">
                <button class="button is-primary">
                    <span>Request</span>
                    <span class="icon" aria-hidden="true">
                        <i class="fas fa-envelope"></i>
                    </span>
                </button>
            </div>
        </form>
    </div>
</div>

<script type="text/javascript">
    document.addEventListener('DOMContentLoaded', () => {

        // Get all "navbar-burger" elements
        const $navbarBurgers = Array.prototype.slice.call(document.querySelectorAll('.navbar-burger'), 0);

        // Check if there are any navbar burgers
        if ($navbarBurgers.length > 0) {

            // Add a click event on each of them
            $navbarBurgers.forEach(el => {
                el.addEventListener('click', () => {

                    // Get the target from the "data-target" attribute
                    const target = el.dataset.target;
                    const $target = document.getElementById(target);

                    // Toggle the "is-active" class on both the "navbar-burger" and the "navbar-menu"
                    el.classList.toggle('is-active');
                    $target.classList.toggle('is-active');

                });
            });
        }

    });

    const closeNotification = e => e.parentElement.remove()
</script>

{% endblock %}